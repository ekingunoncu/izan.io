{
  "id": "figma-search",
  "name": "figma_search",
  "description": "Search for files and projects in Figma by query. Returns matching file names, project names, thumbnails, and URLs. You must be logged into Figma.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "query",
      "type": "string",
      "description": "Search query (e.g. 'landing page', 'design system', 'mobile app')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.figma.com/files/recents",
      "label": "Open Figma home"
    },
    {
      "action": "waitForSelector",
      "selector": "input[placeholder*=\"Search\"], [data-testid=\"search-input\"], [class*=\"search\"] input",
      "timeout": 15000,
      "label": "Wait for search input"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page stabilize"
    },
    {
      "action": "click",
      "selector": "input[placeholder*=\"Search\"], [data-testid=\"search-input\"], [class*=\"search\"] input, [class*=\"search_bar\"], [class*=\"global_search\"]",
      "label": "Click search input"
    },
    {
      "action": "wait",
      "ms": 500,
      "label": "Let search focus"
    },
    {
      "action": "code",
      "code": "const searchInput = document.querySelector('input[placeholder*=\"Search\"], [data-testid=\"search-input\"], [class*=\"search\"] input'); if (!searchInput) throw new Error('Search input not found'); searchInput.focus(); const nativeSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set; nativeSetter.call(searchInput, `{{query}}`); searchInput.dispatchEvent(new Event('input', { bubbles: true })); searchInput.dispatchEvent(new Event('change', { bubbles: true })); await new Promise(r => setTimeout(r, 300)); searchInput.dispatchEvent(new KeyboardEvent('keydown', { key: 'Enter', code: 'Enter', keyCode: 13, which: 13, bubbles: true })); return { typed: true }",
      "name": "type_result",
      "label": "Type search query"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Wait for search results"
    },
    {
      "action": "code",
      "code": "const results = []; const items = document.querySelectorAll('[data-testid=\"file-card\"], .file_card, [class*=\"search_result\"], [class*=\"file-browser-page\"] .tile, [class*=\"search\"] [class*=\"result_item\"]'); for (let i = 0; i < Math.min(items.length, 15); i++) { const item = items[i]; const nameEl = item.querySelector('.file-name, [data-testid=\"filename\"], [class*=\"file_name\"], [class*=\"result_name\"]'); const linkEl = item.querySelector('a[href*=\"/design/\"], a[href*=\"/file/\"], a[href*=\"/board/\"]'); const thumbEl = item.querySelector('img[src*=\"figma\"], img[class*=\"thumbnail\"]'); const projectEl = item.querySelector('[class*=\"project_name\"], [class*=\"folder\"], [class*=\"breadcrumb\"]'); results.push({ name: nameEl ? nameEl.textContent.trim() : '', url: linkEl ? linkEl.href : '', thumbnail: thumbEl ? thumbEl.src : '', project: projectEl ? projectEl.textContent.trim() : '' }); } return { query: `{{query}}`, result_count: results.length, results: results }",
      "name": "result",
      "label": "Extract search results"
    }
  ]
}
