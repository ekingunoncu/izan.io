{
  "id": "ebay-scrape-deals",
  "name": "ebay_scrape_deals",
  "description": "Browse and scrape today's deals from eBay Daily Deals page. Returns current deals with product name, original price, deal price, discount percentage, and free shipping status.",
  "version": "1.0.0",
  "parameters": [],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.ebay.com/deals",
      "label": "Open eBay deals page"
    },
    {
      "action": "waitForSelector",
      "selector": ".dne-itemtile, .ebayui-dne-item-featured-card, .ebayui-dne-item-pattern-card, [class*='deal-card'], [data-testid='item-card']",
      "timeout": 15000,
      "label": "Wait for deals to load"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let deals page fully render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll to load more deals"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll for even more deals"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "code",
      "code": "const deals = []; const dealCards = document.querySelectorAll('.dne-itemtile, .ebayui-dne-item-featured-card, .ebayui-dne-item-pattern-card, [class*=\"deal-card\"], [data-testid=\"item-card\"], .dne-itemtile-detail'); dealCards.forEach(function(el, idx) { if (idx >= 20) return; const titleEl = el.querySelector('.dne-itemtile-title a, .ebayui-dne-item-featured-card__title a, [class*=\"item-title\"] a, a.dne-itemtile-title, h3 a, .s-item__title'); const dealPriceEl = el.querySelector('.dne-itemtile-price .first, .dne-itemtile-price span, [class*=\"deal-price\"], .s-item__price'); const originalPriceEl = el.querySelector('.dne-itemtile-original-price span, .itemtile-price-strikethrough, [class*=\"original-price\"], .s-item__price--original'); const discountEl = el.querySelector('.dne-itemtile-discount, [class*=\"discount-percentage\"], .s-item__discount'); const imgEl = el.querySelector('img[src*=\"ebayimg.com\"], .dne-itemtile-image img, img'); const linkEl = el.querySelector('a[href*=\"/itm/\"], a[href*=\"ebay.com\"], a.dne-itemtile-title'); const freeShippingEl = el.querySelector('.dne-itemtile-shipping, [class*=\"free-shipping\"], .s-item__freeXDays'); const soldEl = el.querySelector('.dne-itemtile-quantity-sold, [class*=\"quantity-sold\"]'); const url = linkEl ? (linkEl.href.startsWith('http') ? linkEl.href : 'https://www.ebay.com' + linkEl.getAttribute('href')) : ''; const title = titleEl ? titleEl.textContent.trim() : ''; if (title) { deals.push({ title: title.substring(0, 200), deal_price: dealPriceEl ? dealPriceEl.textContent.trim() : '', original_price: originalPriceEl ? originalPriceEl.textContent.trim() : '', discount: discountEl ? discountEl.textContent.trim() : '', free_shipping: !!freeShippingEl, sold: soldEl ? soldEl.textContent.trim() : '', image: imgEl ? imgEl.getAttribute('src') : '', url: url }); } }); return { deal_count: deals.length, deals: deals, scraped_at: new Date().toISOString() }",
      "name": "deals_data",
      "label": "Extract current deals"
    }
  ]
}
