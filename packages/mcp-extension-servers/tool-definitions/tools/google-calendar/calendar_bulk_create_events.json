{
  "id": "calendar-bulk-create-events",
  "name": "calendar_bulk_create_events",
  "description": "Create multiple Google Calendar events in parallel using concurrent browser tabs. Pass a JSON array of event objects, each with title, date (YYYY-MM-DD), and optional time (HH:MM) and duration in minutes. Use this instead of calling calendar_create_event multiple times.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "events_json",
      "type": "string",
      "description": "JSON array of event objects, e.g. '[{\"title\":\"Meeting\",\"date\":\"2026-03-01\",\"time\":\"10:00\"},{\"title\":\"Lunch\",\"date\":\"2026-03-01\",\"time\":\"12:30\",\"duration\":\"90\"}]'",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "code",
      "code": "const events = JSON.parse(`{{events_json}}`); return events.map(e => { const title = e.title || 'Untitled Event'; const date = (e.date || '').replace(/-/g, ''); const dur = parseInt(e.duration) || 60; let dates = ''; if (e.time && date) { const [h, m] = e.time.split(':'); const startMin = parseInt(h) * 60 + (parseInt(m) || 0); const endMin = startMin + dur; const endH = String(Math.floor(endMin / 60) % 24).padStart(2, '0'); const endM = String(endMin % 60).padStart(2, '0'); dates = date + 'T' + String(h).padStart(2, '0') + String(m || '00').padStart(2, '0') + '00/' + date + 'T' + endH + endM + '00'; } else if (date) { const d = new Date(parseInt(date.slice(0,4)), parseInt(date.slice(4,6))-1, parseInt(date.slice(6,8))+1); const next = d.getFullYear() + String(d.getMonth()+1).padStart(2,'0') + String(d.getDate()).padStart(2,'0'); dates = date + '/' + next; } const p = new URLSearchParams(); p.set('text', title); if (dates) p.set('dates', dates); if (e.description) p.set('details', e.description); return { url: 'https://calendar.google.com/calendar/r/eventedit?' + p.toString(), title: title, date: e.date || '', time: e.time || '' }; })",
      "name": "items",
      "label": "Parse events JSON and build eventedit URLs"
    },
    {
      "action": "forEachItem",
      "sourceExtract": "items",
      "openMethod": "url",
      "urlField": "url",
      "concurrency": 2,
      "maxItems": 10,
      "waitUntil": "load",
      "label": "Create each event in a parallel tab",
      "detailSteps": [
        {
          "action": "waitForSelector",
          "selector": "input[aria-label='Title'], [data-key='title'], input[placeholder='Add title'], input[aria-label='Add title'], [aria-label='Save']",
          "timeout": 20000,
          "label": "Wait for event creation form to load"
        },
        {
          "action": "wait",
          "ms": 2000,
          "label": "Let form fully render with pre-filled data"
        },
        {
          "action": "code",
          "code": "const saveBtn = document.querySelector('[aria-label=\"Save\"], button[data-tooltip=\"Save\"]'); if (!saveBtn) { const allBtns = [...document.querySelectorAll('button, [role=\"button\"]')]; const save = allBtns.find(b => (b.textContent || '').trim().toLowerCase() === 'save'); if (save) save.click(); else return { error: 'Could not find Save button' }; } else { saveBtn.click(); } await new Promise(r => setTimeout(r, 3000)); const params = new URLSearchParams(window.location.search); return { success: true, title: params.get('text') || '', url: window.location.href }",
          "name": "create_result",
          "label": "Click Save to create the event"
        }
      ]
    }
  ]
}
