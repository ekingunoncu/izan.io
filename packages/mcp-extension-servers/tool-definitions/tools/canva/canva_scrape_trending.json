{
  "id": "canva-scrape-trending",
  "name": "canva_scrape_trending",
  "description": "Scrape trending and popular templates on Canva. Returns the most popular and recently featured templates across categories.",
  "version": "1.0.0",
  "parameters": [],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.canva.com/templates/",
      "label": "Open Canva templates page"
    },
    {
      "action": "waitForSelector",
      "selector": "[class*='template'], [class*='card'], [class*='grid'], a[href*='/templates/']",
      "timeout": 15000,
      "label": "Wait for templates to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll to load more"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const categories = []; const catEls = document.querySelectorAll('[class*=\"category\"] a, nav a[href*=\"/templates/\"], [class*=\"browse\"] a'); catEls.forEach(function(el) { const t = el.textContent.trim(); const href = el.getAttribute('href') || ''; if (t && t.length < 80 && !categories.find(c => c.name === t)) { categories.push({ name: t, url: href.startsWith('http') ? href : 'https://www.canva.com' + href }); } }); const templates = []; const templateEls = document.querySelectorAll('a[href*=\"/templates/\"], [class*=\"template\"] a, [class*=\"card\"] a[href*=\"template\"]'); for (let i = 0; i < Math.min(templateEls.length, 20); i++) { const el = templateEls[i]; const nameEl = el.querySelector('[class*=\"title\"], h3, h4, [aria-label]'); const imgEl = el.querySelector('img'); const proEl = el.querySelector('[class*=\"pro\"], [class*=\"premium\"]'); templates.push({ rank: i + 1, title: nameEl ? (nameEl.getAttribute('aria-label') || nameEl.textContent.trim()) : (el.getAttribute('aria-label') || ''), is_premium: !!proEl, image: imgEl ? imgEl.getAttribute('src') : '', url: el.href || '' }); } return { categories: categories.slice(0, 15), trending_count: templates.length, templates: templates, url: window.location.href }",
      "name": "trending_data",
      "label": "Extract trending templates"
    }
  ]
}