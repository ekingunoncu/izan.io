{
  "id": "canva-scrape-template",
  "name": "canva_scrape_template",
  "description": "Scrape full template details from a Canva template page. Returns template name, description, dimensions, category, creator, related templates, and usage count.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "template_url",
      "type": "string",
      "description": "Canva template URL (e.g. 'https://www.canva.com/templates/EAF1234/template-name/')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "{{template_url}}",
      "label": "Open template page"
    },
    {
      "action": "waitForSelector",
      "selector": "h1, [role='heading']",
      "timeout": 15000,
      "label": "Wait for template page to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 800,
      "label": "Scroll to load content"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 800,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const titleEl = document.querySelector('h1, [role=\"heading\"]'); const metaDesc = document.querySelector('meta[name=\"description\"]'); const descEl = document.querySelector('main p, article p'); const breadcrumbs = document.querySelectorAll('nav a, [aria-label=\"breadcrumb\"] a'); const categoryEl = breadcrumbs.length > 0 ? breadcrumbs[breadcrumbs.length - 1] : null; const imgEl = document.querySelector('main img, article img, [role=\"img\"]'); const proEl = document.querySelector('[aria-label*=\"Pro\"], [aria-label*=\"premium\"]'); const tagEls = document.querySelectorAll('a[href*=\"/templates/s/\"]'); const tags = []; tagEls.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length < 50 && !tags.includes(t)) tags.push(t); }); const relatedEls = document.querySelectorAll('a[href*=\"/templates/\"]'); const related = []; const seen = new Set(); seen.add(window.location.href); relatedEls.forEach(function(el) { if (related.length >= 6) return; const href = el.href || ''; if (!href || seen.has(href)) return; seen.add(href); const iEl = el.querySelector('img'); const label = el.getAttribute('aria-label') || ''; const tEl = el.querySelector('h3, h4, [aria-label]'); related.push({ title: label || (tEl ? (tEl.getAttribute('aria-label') || tEl.textContent.trim()) : ''), url: href, image: iEl ? iEl.getAttribute('src') : '' }); }); return { title: titleEl ? titleEl.textContent.trim() : '', description: metaDesc ? metaDesc.getAttribute('content') : (descEl ? descEl.textContent.trim().substring(0, 1000) : ''), category: categoryEl ? categoryEl.textContent.trim() : '', is_premium: !!proEl, tags: tags.slice(0, 10), image: imgEl ? imgEl.getAttribute('src') : '', related_templates: related, url: window.location.href }",
      "name": "template_data",
      "label": "Extract template details"
    }
  ]
}