{
  "id": "hn-search",
  "name": "hn_search",
  "description": "Search Hacker News stories via Algolia HN Search. Returns matching stories with title, URL, points, author, comment count, and date.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "query",
      "type": "string",
      "description": "Search query (e.g. 'rust programming', 'OpenAI GPT')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://hn.algolia.com/",
      "urlParams": {
        "q": "{{query}}"
      },
      "label": "Search HN via Algolia"
    },
    {
      "action": "waitForSelector",
      "selector": ".Story",
      "timeout": 15000,
      "label": "Wait for search results"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let results render"
    },
    {
      "action": "code",
      "code": "const results = []; const stories = document.querySelectorAll('.Story'); for (let i = 0; i < Math.min(stories.length, 20); i++) { const story = stories[i]; const titleEl = story.querySelector('.Story_title a:first-child'); const metaEl = story.querySelector('.Story_meta'); const pointsEl = metaEl ? metaEl.querySelector('span:first-child') : null; const metaLinks = metaEl ? metaEl.querySelectorAll('a') : []; let author = ''; let date = ''; let commentCount = '0'; let hnLink = ''; for (const link of metaLinks) { const text = link.textContent.trim(); const href = link.getAttribute('href') || ''; if (href.includes('user?id=')) { author = text; } else if (href.includes('item?id=')) { if (text.includes('comment')) { commentCount = text.split(' ')[0]; } else { hnLink = 'https://news.ycombinator.com/' + href; } } } const timeEl = metaEl ? metaEl.querySelector('span[title]') : null; if (timeEl) { date = timeEl.getAttribute('title') || timeEl.textContent.trim(); } else if (metaEl) { const spans = metaEl.querySelectorAll('span'); for (const s of spans) { if (s.textContent.includes('ago') || s.getAttribute('title')) { date = s.getAttribute('title') || s.textContent.trim(); break; } } } results.push({ title: titleEl ? titleEl.textContent.trim() : '', url: titleEl ? titleEl.href : '', points: pointsEl ? pointsEl.textContent.trim() : '', author: author, comment_count: commentCount, date: date, hn_url: hnLink }); } return { query: '{{query}}', result_count: results.length, results: results }",
      "name": "search_results",
      "label": "Extract search results"
    }
  ]
}
