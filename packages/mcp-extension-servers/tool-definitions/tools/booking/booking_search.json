{
  "id": "booking-search",
  "name": "booking_search",
  "description": "Search for hotels on Booking.com. Returns up to 15 results with hotel name, price, rating, location, star rating, and URL.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "destination",
      "type": "string",
      "description": "Destination city or region (e.g. 'Paris', 'New York', 'Tokyo')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.booking.com/searchresults.html?ss={{destination}}",
      "label": "Search Booking.com"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-testid='property-card'], .sr_property_block",
      "timeout": 15000,
      "label": "Wait for search results"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let results fully render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll to load more results"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll further down"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "code",
      "code": "const results = []; const cards = document.querySelectorAll('[data-testid=\"property-card\"], .sr_property_block'); for (let i = 0; i < Math.min(cards.length, 15); i++) { const el = cards[i]; const nameEl = el.querySelector('[data-testid=\"title\"], .sr-hotel__name, a[data-testid=\"title-link\"] div'); const linkEl = el.querySelector('a[data-testid=\"title-link\"], a.hotel_name_link, a[data-testid=\"property-card-desktop-single-image\"]'); const priceEl = el.querySelector('[data-testid=\"price-and-discounted-price\"], .bui-price-display__value, .prco-valign-middle-helper, span[data-testid=\"price-and-discounted-price\"]'); const ratingEl = el.querySelector('[data-testid=\"review-score\"] div:first-child, .bui-review-score__badge, [aria-label*=\"Scored\"]'); const ratingTextEl = el.querySelector('[data-testid=\"review-score\"] div:nth-child(2) div:first-child, .bui-review-score__text'); const reviewCountEl = el.querySelector('[data-testid=\"review-score\"] div:nth-child(2) div:nth-child(2), .bui-review-score__text + div'); const locationEl = el.querySelector('[data-testid=\"address\"], .sr_card_address_line, span[data-testid=\"distance\"]'); const starsEl = el.querySelector('[data-testid=\"rating-stars\"], .bui-rating, [aria-label*=\"stars\"]'); const imgEl = el.querySelector('img[data-testid=\"image\"], img.hotel_image, img[loading]'); const starCount = starsEl ? (starsEl.querySelectorAll('span, svg').length || starsEl.getAttribute('aria-label') || '') : ''; const url = linkEl ? (linkEl.href.startsWith('http') ? linkEl.href : 'https://www.booking.com' + linkEl.getAttribute('href')) : ''; const name = nameEl ? nameEl.textContent.trim() : ''; if (name) { results.push({ name: name, price: priceEl ? priceEl.textContent.trim() : '', rating_score: ratingEl ? ratingEl.textContent.trim() : '', rating_text: ratingTextEl ? ratingTextEl.textContent.trim() : '', review_count: reviewCountEl ? reviewCountEl.textContent.trim() : '', location: locationEl ? locationEl.textContent.trim() : '', stars: starCount, image: imgEl ? imgEl.getAttribute('src') : '', url: url }); } } return { destination: `{{destination}}`, result_count: results.length, results: results }",
      "name": "search_results",
      "label": "Extract hotel listings"
    }
  ]
}