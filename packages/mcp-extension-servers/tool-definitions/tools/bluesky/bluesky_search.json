{
  "id": "bluesky-search",
  "name": "bluesky_search",
  "description": "Search for posts on Bluesky. Returns up to 15 results with author, content, likes, reposts, replies, and URL.",
  "version": "1.0.0",
  "parameters": [
    { "name": "query", "type": "string", "description": "Search query (e.g. 'AI news', 'web development', '#tech')", "required": true }
  ],
  "steps": [
    { "action": "navigate", "url": "https://bsky.app/search?q={{query}}", "label": "Search Bluesky" },
    { "action": "waitForSelector", "selector": "[data-testid='postText'], article, div[tabindex='0']", "timeout": 15000, "label": "Wait for results" },
    { "action": "wait", "ms": 2000, "label": "Let results render" },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll for more" },
    { "action": "wait", "ms": 1500 },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll further" },
    { "action": "wait", "ms": 1500 },
    {
      "action": "code",
      "code": "const results = []; const posts = document.querySelectorAll('[data-testid^=\"feedItem-by-\"], div[tabindex=\"0\"][role=\"link\"]'); for (let i = 0; i < Math.min(posts.length, 15); i++) { const el = posts[i]; const authorEl = el.querySelector('[data-testid=\"profileHeaderDisplayName\"], a[href*=\"/profile/\"] span, div[style*=\"font-weight\"] span'); const handleEl = el.querySelector('a[href*=\"/profile/\"]'); const contentEl = el.querySelector('[data-testid=\"postText\"]'); const timeEl = el.querySelector('time'); const linkEl = el.querySelector('a[href*=\"/post/\"]'); const imgEl = el.querySelector('img[src*=\"feed_\"], img[src*=\"cdn\"]'); const likeBtn = el.querySelector('[data-testid=\"likeBtn\"]'); const replyBtn = el.querySelector('[data-testid=\"replyBtn\"]'); const likesText = likeBtn ? likeBtn.getAttribute('aria-label') || '' : ''; const repliesText = replyBtn ? replyBtn.getAttribute('aria-label') || '' : ''; let handle = ''; if (handleEl) { const href = handleEl.getAttribute('href') || ''; const match = href.match(/\\/profile\\/([^/]+)/); if (match) handle = match[1]; } results.push({ author: authorEl ? authorEl.textContent.trim() : '', handle: handle, content: contentEl ? contentEl.textContent.trim().substring(0, 500) : '', likes: likesText, replies: repliesText, time: timeEl ? (timeEl.getAttribute('datetime') || timeEl.textContent.trim()) : '', url: linkEl ? linkEl.href : '', has_image: !!imgEl }); } return { query: `{{query}}`, result_count: results.length, results: results }",
      "name": "search_results",
      "label": "Extract search results"
    }
  ]
}