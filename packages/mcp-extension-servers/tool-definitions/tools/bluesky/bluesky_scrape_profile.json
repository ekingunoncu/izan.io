{
  "id": "bluesky-scrape-profile",
  "name": "bluesky_scrape_profile",
  "description": "Scrape a Bluesky user profile. Returns display name, handle, bio, follower count, following count, post count, and recent posts.",
  "version": "1.0.0",
  "parameters": [
    { "name": "handle", "type": "string", "description": "Bluesky handle (e.g. 'user.bsky.social' or 'custom.domain')", "required": true }
  ],
  "steps": [
    { "action": "navigate", "url": "https://bsky.app/profile/{{handle}}", "label": "Open profile" },
    { "action": "waitForSelector", "selector": "[data-testid='profileHeaderDisplayName'], h1", "timeout": 15000, "label": "Wait for profile" },
    { "action": "wait", "ms": 2000 },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll for posts" },
    { "action": "wait", "ms": 1500 },
    {
      "action": "code",
      "code": "const nameEl = document.querySelector('[data-testid=\"profileHeaderDisplayName\"]'); const bioEl = document.querySelector('[data-testid=\"profileHeaderDescription\"]'); const avatarEl = document.querySelector('img[alt*=\"avatar\"], img[src*=\"avatar\"]'); const stats = {}; const followersBtn = document.querySelector('[data-testid=\"profileHeaderFollowersButton\"]'); const followsBtn = document.querySelector('[data-testid=\"profileHeaderFollowsButton\"]'); if (followersBtn) stats.followers = followersBtn.textContent.trim(); if (followsBtn) stats.following = followsBtn.textContent.trim(); const postCountEls = document.querySelectorAll('a[href*=\"/profile/\"] + div span, [role=\"tablist\"] + div span'); let postsCount = ''; for (const el of postCountEls) { const text = el.textContent.trim().toLowerCase(); if (text.includes('post')) { postsCount = text; break; } } let handle = '{{handle}}'; const handleLinks = document.querySelectorAll('a[href*=\"/profile/\"]'); for (const a of handleLinks) { const text = a.textContent.trim(); if (text.startsWith('@') || text.includes('.')) { handle = text; break; } } const recentPosts = []; document.querySelectorAll('[data-testid^=\"feedItem-by-\"]').forEach(function(el) { const contentEl = el.querySelector('[data-testid=\"postText\"]'); const likeBtn = el.querySelector('[data-testid=\"likeBtn\"]'); const timeEl = el.querySelector('time'); const linkEl = el.querySelector('a[href*=\"/post/\"]'); if (contentEl && recentPosts.length < 10) { recentPosts.push({ content: contentEl.textContent.trim().substring(0, 300), likes: likeBtn ? (likeBtn.getAttribute('aria-label') || '') : '', time: timeEl ? (timeEl.getAttribute('datetime') || timeEl.textContent.trim()) : '', url: linkEl ? linkEl.href : '' }); } }); return { display_name: nameEl ? nameEl.textContent.trim() : '', handle: handle, bio: bioEl ? bioEl.textContent.trim().substring(0, 500) : '', avatar: avatarEl ? avatarEl.getAttribute('src') : '', followers: stats.followers || '', following: stats.following || '', posts_count: postsCount, recent_posts: recentPosts, url: window.location.href }",
      "name": "profile_data",
      "label": "Extract profile"
    }
  ]
}