{
  "id": "x-auto-post-tweet",
  "name": "post_tweet",
  "description": "Post a new tweet to your X/Twitter timeline. You must be logged in to x.com.",
  "version": "1.0.1",
  "parameters": [
    {
      "name": "text",
      "type": "string",
      "description": "The tweet text to post (max 280 characters)",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://x.com/compose/post",
      "label": "Open tweet composer"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-testid^='tweetTextarea']",
      "timeout": 15000,
      "label": "Wait for compose box"
    },
    {
      "action": "wait",
      "ms": 1000,
      "label": "Let page settle"
    },
    {
      "action": "click",
      "selector": "[data-testid^='tweetTextarea']",
      "label": "Focus compose box"
    },
    {
      "action": "wait",
      "ms": 300,
      "label": "Wait for focus"
    },
    {
      "action": "code",
      "code": "const txt = `{{text}}`; if (txt.length > 280) throw new Error('Tweet exceeds 280 characters (' + txt.length + ' chars). Please shorten it.'); const el = document.querySelector('[data-testid^=\"tweetTextarea\"] [contenteditable=\"true\"], [data-testid^=\"tweetTextarea\"][contenteditable=\"true\"], [data-testid^=\"tweetTextarea\"]'); if (!el) throw new Error('Tweet textarea not found'); el.focus(); document.execCommand('insertText', false, txt); el.dispatchEvent(new Event('input', {bubbles: true})); return { typed: true, characters: txt.length }",
      "name": "type_text",
      "label": "Type tweet text"
    },
    {
      "action": "wait",
      "ms": 500,
      "label": "Brief pause before posting"
    },
    {
      "action": "click",
      "selector": "[data-testid^='tweetButton'], [data-testid='tweetButton']",
      "label": "Click Post button"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Wait for tweet to post"
    },
    {
      "action": "code",
      "code": "return { success: true, message: 'Tweet posted successfully' }",
      "name": "result",
      "label": "Confirm post"
    }
  ]
}
