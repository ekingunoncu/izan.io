{
  "id": "x-auto-bulk-scrape-profiles",
  "name": "bulk_scrape_profiles",
  "description": "Scrape multiple X/Twitter profiles in parallel. Returns bio, follower/following counts, location, website for each user.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "usernames",
      "type": "string",
      "description": "Comma-separated usernames to scrape (without @, e.g. 'elonmusk,openai,anthropic')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "code",
      "code": "return `{{usernames}}`.split(',').map(u => ({ url: 'https://x.com/' + u.trim(), username: u.trim() }))",
      "name": "items",
      "label": "Build profile URL list"
    },
    {
      "action": "forEachItem",
      "sourceExtract": "items",
      "openMethod": "url",
      "urlField": "url",
      "concurrency": 3,
      "maxItems": 10,
      "waitUntil": "load",
      "label": "Scrape each profile in parallel",
      "detailSteps": [
        {
          "action": "waitForSelector",
          "selector": "[data-testid='UserName']",
          "timeout": 15000,
          "label": "Wait for profile"
        },
        {
          "action": "wait",
          "ms": 1000
        },
        {
          "action": "code",
          "code": "const nameEl = document.querySelector('[data-testid=\"UserName\"]'); const bioEl = document.querySelector('[data-testid=\"UserDescription\"]'); const locationEl = document.querySelector('[data-testid=\"UserLocation\"]'); const urlEl = document.querySelector('[data-testid=\"UserUrl\"]'); const joinDateEl = document.querySelector('[data-testid=\"UserJoinDate\"]'); const followingLink = document.querySelector('a[href$=\"/following\"] span span'); const followersLink = document.querySelector('a[href$=\"/verified_followers\"] span span, a[href$=\"/followers\"] span span'); const isVerified = !!document.querySelector('[data-testid=\"icon-verified\"]'); return { name: nameEl ? (nameEl.querySelector('span span') ? nameEl.querySelector('span span').textContent.trim() : nameEl.textContent.trim().split('\\n')[0]) : 'Unknown', username: '@' + window.location.pathname.replace('/', ''), bio: bioEl ? bioEl.textContent.trim() : '', location: locationEl ? locationEl.textContent.trim() : '', website: urlEl ? urlEl.textContent.trim() : '', join_date: joinDateEl ? joinDateEl.textContent.trim() : '', following: followingLink ? followingLink.textContent.trim() : '0', followers: followersLink ? followersLink.textContent.trim() : '0', verified: isVerified, url: window.location.href }",
          "name": "profile",
          "label": "Extract profile data"
        }
      ]
    }
  ]
}
