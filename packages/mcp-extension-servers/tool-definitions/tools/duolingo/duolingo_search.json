{
  "id": "duolingo-search",
  "name": "duolingo_search",
  "description": "Search Duolingo. Look up a Duolingo user profile by username.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "query",
      "type": "string",
      "description": "Duolingo username",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.duolingo.com/profile/{{query}}",
      "label": "Open Duolingo search"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-test=\"profile-header\"], h1, .profile-header",
      "timeout": 15000,
      "label": "Wait for results"
    },
    {
      "action": "wait",
      "ms": 2500,
      "label": "Let results render"
    },
    {
      "action": "code",
      "code": "const name = document.querySelector('h1, [data-test=\"profile-header\"] h1')?.textContent?.trim() || ''; let streak = ''; let xp = ''; document.querySelectorAll('span, div, p').forEach(el => { const t = el.textContent; if (t.match(/day streak/i)) { const m = t.match(/(\\d+)/); if (m) streak = m[1]; } if (t.match(/total.*xp/i) || t.match(/([\\d,]+)\\s*XP/i)) { const m = t.match(/([\\d,]+)\\s*XP/i); if (m) xp = m[1]; } }); return { display_name: name, streak, total_xp: xp, url: window.location.href };",
      "name": "search_results",
      "label": "Extract results"
    }
  ]
}
