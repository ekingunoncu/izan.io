{
  "id": "kaggle-scrape-dataset",
  "name": "kaggle_scrape_dataset",
  "description": "Scrape a specific Kaggle dataset page. Returns title, description, file list, usability score, and download count.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "dataset_slug",
      "type": "string",
      "description": "Dataset slug in 'username/dataset-name' format (e.g. 'heptapod/titanic')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.kaggle.com/datasets/{{dataset_slug}}",
      "label": "Open dataset page"
    },
    {
      "action": "waitForSelector",
      "selector": "h1, [role='main']",
      "timeout": 15000,
      "label": "Wait for dataset page"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 800,
      "label": "Scroll for more content"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const title = document.querySelector('h1')?.textContent?.trim() || document.title.split('|')[0]?.trim() || ''; const descEl = document.querySelector('[class*=\"markdown\"], [class*=\"description\"], [class*=\"rendered\"]'); const desc = descEl ? descEl.textContent.trim().substring(0, 1000) : ''; const files = []; document.querySelectorAll('a[href*=\"?select=\"], tr td:first-child, [class*=\"file\"] span').forEach(f => { const text = f.textContent?.trim(); if (text && text.length < 100 && text.length > 1) files.push(text); }); const allText = document.body.innerText; const usabilityMatch = allText.match(/(\\d+\\.?\\d*)\\s*(?:usability|score)/i); const downloadMatch = allText.match(/(\\d[\\d,]*)\\s*downloads?/i); const sizeMatch = allText.match(/(\\d+\\.?\\d*\\s*(?:KB|MB|GB|TB))/i); const tags = []; document.querySelectorAll('a[href*=\"/tags/\"]').forEach(a => { const text = a.textContent.trim(); if (text && text.length < 50) tags.push(text); }); return { title, description: desc, files: files.slice(0, 20), usability: usabilityMatch ? usabilityMatch[1] : '', downloads: downloadMatch ? downloadMatch[1] : '', size: sizeMatch ? sizeMatch[1] : '', tags: tags.slice(0, 10), url: window.location.href };",
      "name": "dataset_data",
      "label": "Extract dataset info"
    }
  ]
}
