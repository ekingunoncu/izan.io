{
  "id": "expedia-search-hotels",
  "name": "expedia_search_hotels",
  "description": "Search for hotels on Expedia. Returns up to 15 hotel results with name, star rating, guest rating, price per night, amenities, and URL.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "destination",
      "type": "string",
      "description": "Destination city or area (e.g. 'New York', 'Paris', 'Tokyo')",
      "required": true
    },
    {
      "name": "checkin",
      "type": "string",
      "description": "Check-in date in YYYY-MM-DD format (e.g. '2025-03-15')",
      "required": true
    },
    {
      "name": "checkout",
      "type": "string",
      "description": "Check-out date in YYYY-MM-DD format (e.g. '2025-03-18')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.expedia.com/Hotel-Search?destination={{destination}}&startDate={{checkin}}&endDate={{checkout}}&adults=2",
      "label": "Search hotels on Expedia"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-stid='lodging-card-responsive'], [data-stid='property-listing']",
      "timeout": 20000,
      "label": "Wait for hotel results"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let results render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll to load more"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const results = []; const items = document.querySelectorAll('[data-stid=\"lodging-card-responsive\"], [data-stid=\"property-listing\"]'); for (let i = 0; i < Math.min(items.length, 15); i++) { const el = items[i]; const nameEl = el.querySelector('h3, h2'); const ratingEl = el.querySelector('span.is-visually-hidden, [aria-label*=\"rating\"]'); const priceEl = el.querySelector('[data-test-id=\"price-summary-message-line\"] span, [data-stid=\"price-lockup\"] span'); const imgEl = el.querySelector('img'); const linkEl = el.querySelector('a[data-stid=\"open-hotel-information\"], a[href*=\"Hotel-Information\"], a[href*=\".h\"]'); const neighborhoodEl = el.querySelector('[data-stid=\"content-hotel-neighborhood\"], [class*=\"neighborhood\"]'); const amenityEls = el.querySelectorAll('[data-stid=\"amenity-icon\"] span, [aria-label*=\"amenity\"]'); const amenities = []; amenityEls.forEach(function(a) { const t = a.textContent.trim(); if (t && t.length < 50) amenities.push(t); }); const reviewCountEl = el.querySelector('[data-stid=\"reviews\"] span, [aria-label*=\"reviews\"]'); const url = linkEl ? (linkEl.href.startsWith('http') ? linkEl.href : 'https://www.expedia.com' + linkEl.getAttribute('href')) : ''; results.push({ name: nameEl ? nameEl.textContent.trim() : '', guest_rating: ratingEl ? ratingEl.textContent.trim() : '', review_count: reviewCountEl ? reviewCountEl.textContent.trim() : '', price: priceEl ? priceEl.textContent.trim() : '', neighborhood: neighborhoodEl ? neighborhoodEl.textContent.trim() : '', amenities: amenities.slice(0, 5), image: imgEl ? imgEl.getAttribute('src') : '', url: url }); } return { destination: `{{destination}}`, checkin: `{{checkin}}`, checkout: `{{checkout}}`, result_count: results.length, results: results }",
      "name": "hotel_results",
      "label": "Extract hotel results"
    }
  ]
}
