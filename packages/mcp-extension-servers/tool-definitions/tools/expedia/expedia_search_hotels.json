{
  "id": "expedia-search-hotels",
  "name": "expedia_search_hotels",
  "description": "Search for hotels on Expedia. Returns up to 15 hotel results with name, star rating, guest rating, price per night, amenities, and URL.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "destination",
      "type": "string",
      "description": "Destination city or area (e.g. 'New York', 'Paris', 'Tokyo')",
      "required": true
    },
    {
      "name": "checkin",
      "type": "string",
      "description": "Check-in date in YYYY-MM-DD format (e.g. '2025-03-15')",
      "required": true
    },
    {
      "name": "checkout",
      "type": "string",
      "description": "Check-out date in YYYY-MM-DD format (e.g. '2025-03-18')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.expedia.com/Hotel-Search?destination={{destination}}&startDate={{checkin}}&endDate={{checkout}}",
      "label": "Search hotels on Expedia"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-stid='property-listing'], [class*='hotel-card'], [class*='PropertyCard'], [class*='listing']",
      "timeout": 20000,
      "label": "Wait for hotel results"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let results render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll to load more"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const results = []; const items = document.querySelectorAll('[data-stid=\"property-listing\"], [class*=\"hotel-card\"], [class*=\"PropertyCard\"], [class*=\"listing-item\"]'); for (let i = 0; i < Math.min(items.length, 15); i++) { const el = items[i]; const nameEl = el.querySelector('h3, h2, [data-stid=\"content-hotel-title\"], [class*=\"hotel-name\"]'); const ratingEl = el.querySelector('[class*=\"guest-rating\"], [class*=\"review-score\"], [class*=\"rating\"] span'); const starEl = el.querySelector('[class*=\"star\"], [class*=\"Star\"]'); const priceEl = el.querySelector('[data-stid=\"content-hotel-price\"], [class*=\"price\"] span, [class*=\"displayPrice\"]'); const imgEl = el.querySelector('img[src*=\"images\"], img[class*=\"hotel\"]'); const linkEl = el.querySelector('a[href*=\"Hotel\"], a[href*=\"hotel\"]'); const neighborhoodEl = el.querySelector('[class*=\"neighborhood\"], [class*=\"location\"], [class*=\"distance\"]'); const amenityEls = el.querySelectorAll('[class*=\"amenity\"], [class*=\"feature\"] span'); const amenities = []; amenityEls.forEach(function(a) { const t = a.textContent.trim(); if (t && t.length < 50) amenities.push(t); }); const reviewCountEl = el.querySelector('[class*=\"review-count\"], [class*=\"reviewCount\"]'); results.push({ name: nameEl ? nameEl.textContent.trim() : '', star_rating: starEl ? starEl.textContent.trim() : '', guest_rating: ratingEl ? ratingEl.textContent.trim() : '', review_count: reviewCountEl ? reviewCountEl.textContent.trim() : '', price: priceEl ? priceEl.textContent.trim() : '', neighborhood: neighborhoodEl ? neighborhoodEl.textContent.trim() : '', amenities: amenities.slice(0, 5), image: imgEl ? imgEl.getAttribute('src') : '', url: linkEl ? linkEl.href : '' }); } return { destination: `{{destination}}`, checkin: `{{checkin}}`, checkout: `{{checkout}}`, result_count: results.length, results: results }",
      "name": "hotel_results",
      "label": "Extract hotel results"
    }
  ]
}