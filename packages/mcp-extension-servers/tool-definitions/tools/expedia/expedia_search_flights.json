{
  "id": "expedia-search-flights",
  "name": "expedia_search_flights",
  "description": "Search for flights on Expedia. Returns up to 15 flight results with airline, departure/arrival times, duration, stops, price, and booking URL.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "origin",
      "type": "string",
      "description": "Origin airport code or city (e.g. 'LAX', 'New York')",
      "required": true
    },
    {
      "name": "destination",
      "type": "string",
      "description": "Destination airport code or city (e.g. 'JFK', 'London')",
      "required": true
    },
    {
      "name": "departure_date",
      "type": "string",
      "description": "Departure date in YYYY-MM-DD format (e.g. '2025-03-15')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.expedia.com/Flights-search/{{origin}}-{{destination}}/{{departure_date}}",
      "label": "Search flights on Expedia"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-test-id='listing'], [class*='flight-module'], [class*='FlightCard'], li[class*='result']",
      "timeout": 20000,
      "label": "Wait for flight results"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let results render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll to load more results"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const results = []; const items = document.querySelectorAll('[data-test-id=\"listing\"], [class*=\"flight-module\"], [class*=\"FlightCard\"], li[class*=\"result\"]'); for (let i = 0; i < Math.min(items.length, 15); i++) { const el = items[i]; const airlineEl = el.querySelector('[data-test-id=\"airline-name\"], [class*=\"airline\"], [class*=\"carrier\"]'); const departTimeEl = el.querySelector('[data-test-id=\"departure-time\"], [class*=\"depart\"] [class*=\"time\"], [class*=\"departure-time\"]'); const arriveTimeEl = el.querySelector('[data-test-id=\"arrival-time\"], [class*=\"arrival\"] [class*=\"time\"], [class*=\"arrival-time\"]'); const durationEl = el.querySelector('[data-test-id=\"duration\"], [class*=\"duration\"]'); const stopsEl = el.querySelector('[data-test-id=\"stops\"], [class*=\"stops\"], [class*=\"layover\"]'); const priceEl = el.querySelector('[data-test-id=\"price\"], [class*=\"price\"] span, [class*=\"displayPrice\"]'); const linkEl = el.querySelector('a[href*=\"flight\"], button[data-test-id=\"select-button\"]'); const logoEl = el.querySelector('img[class*=\"airline\"], img[class*=\"logo\"]'); results.push({ airline: airlineEl ? airlineEl.textContent.trim() : '', departure_time: departTimeEl ? departTimeEl.textContent.trim() : '', arrival_time: arriveTimeEl ? arriveTimeEl.textContent.trim() : '', duration: durationEl ? durationEl.textContent.trim() : '', stops: stopsEl ? stopsEl.textContent.trim() : '', price: priceEl ? priceEl.textContent.trim() : '', logo: logoEl ? logoEl.getAttribute('src') : '', url: linkEl && linkEl.href ? linkEl.href : window.location.href }); } return { origin: `{{origin}}`, destination: `{{destination}}`, departure_date: `{{departure_date}}`, result_count: results.length, results: results }",
      "name": "flight_results",
      "label": "Extract flight results"
    }
  ]
}