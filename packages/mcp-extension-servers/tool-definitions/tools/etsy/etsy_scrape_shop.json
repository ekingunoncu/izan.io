{
  "id": "etsy-scrape-shop",
  "name": "etsy_scrape_shop",
  "description": "Scrape an Etsy shop profile page. Returns shop name, description, total sales, rating, review count, location, active listings count, and featured items.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "shop_name",
      "type": "string",
      "description": "Etsy shop name (e.g. 'MyHandmadeShop', the part after /shop/ in the URL)",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.etsy.com/shop/{{shop_name}}",
      "label": "Open shop page"
    },
    {
      "action": "waitForSelector",
      "selector": "h1, [data-shop-name], .v2-listing-card, a.listing-link",
      "timeout": 15000,
      "label": "Wait for shop page to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page fully render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll to load listings"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll further down"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const nameEl = document.querySelector('h1, [data-shop-name]'); const descriptionEl = document.querySelector('[data-id=\"about-section\"], [aria-label*=\"announcement\"], [data-shop-announcement]'); const salesEl = document.querySelector('[aria-label*=\"sale\"], span[title*=\"sale\"]'); const ratingEl = document.querySelector('input[name=\"rating\"], [data-rating], [aria-label*=\"star rating\"]'); const reviewCountEl = document.querySelector('a[href*=\"reviews\"] span, a[href*=\"#reviews\"]'); const locationEl = document.querySelector('[data-shop-location], [aria-label*=\"location\"]'); const imgEl = document.querySelector('img[alt*=\"shop\"][src*=\"etsystatic\"], img[aria-label*=\"shop\"]'); const memberSinceEl = document.querySelector('[aria-label*=\"member since\"], [data-member-since]'); const ownerEl = document.querySelector('a[href*=\"/people/\"], [data-shop-owner]'); const listings = []; const listingEls = document.querySelectorAll('.v2-listing-card, li[data-listing-id]'); for (let i = 0; i < Math.min(listingEls.length, 12); i++) { const el = listingEls[i]; const titleEl = el.querySelector('h2.v2-listing-card__title, h3.v2-listing-card__title, h2, h3, a[title]'); const priceEl = el.querySelector('span.currency-value, [data-currency-value]'); const currencyEl = el.querySelector('span.currency-symbol'); const linkEl = el.querySelector('a.listing-link, a[href*=\"/listing/\"]'); const imgEl = el.querySelector('img'); listings.push({ title: titleEl ? (titleEl.getAttribute('title') || titleEl.textContent.trim()) : '', price: (currencyEl ? currencyEl.textContent.trim() : '') + (priceEl ? priceEl.textContent.trim() : ''), url: linkEl ? linkEl.href : '', image: imgEl ? imgEl.getAttribute('src') : '' }); } const sectionEls = document.querySelectorAll('nav a[href*=\"section_id\"], [data-section-id] a'); const sections = []; sectionEls.forEach(function(el) { const text = el.textContent.trim(); if (text && text.length < 100) sections.push(text); }); return { name: nameEl ? nameEl.textContent.trim() : '{{shop_name}}', description: descriptionEl ? descriptionEl.textContent.trim().substring(0, 1000) : '', total_sales: salesEl ? salesEl.textContent.trim() : '', rating: ratingEl ? (ratingEl.getAttribute('value') || ratingEl.getAttribute('aria-label') || ratingEl.textContent.trim()) : '', review_count: reviewCountEl ? reviewCountEl.textContent.trim() : '', location: locationEl ? locationEl.textContent.trim() : '', owner: ownerEl ? ownerEl.textContent.trim() : '', member_since: memberSinceEl ? memberSinceEl.textContent.trim() : '', image: imgEl ? imgEl.getAttribute('src') : '', sections: sections.slice(0, 15), listing_count: listings.length, listings: listings, shop_url: window.location.href }",
      "name": "shop_data",
      "label": "Extract shop profile"
    }
  ]
}
