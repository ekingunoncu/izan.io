{
  "id": "coursera-scrape-course",
  "name": "coursera_scrape_course",
  "description": "Scrape full course details from a Coursera course page. Returns title, provider, description, rating, enrollment count, syllabus, skills, level, and instructor info.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "course_url",
      "type": "string",
      "description": "Coursera course URL (e.g. 'https://www.coursera.org/learn/machine-learning')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "{{course_url}}",
      "label": "Open course page"
    },
    {
      "action": "waitForSelector",
      "selector": "h1",
      "timeout": 15000,
      "label": "Wait for course page to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll to load content"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll to syllabus"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const titleEl = document.querySelector('h1'); const providerEls = document.querySelectorAll('a[href*=\"/partners/\"], a[href*=\"/instructor/\"], [class*=\"partnerName\"] a'); const providers = []; providerEls.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length < 80 && !providers.includes(t)) providers.push(t); }); const descEl = document.querySelector('[class*=\"description\"] p, [class*=\"about\"] p, section p'); const ratingEl = document.querySelector('[role=\"meter\"], [aria-label*=\"stars\"], [class*=\"cds-RatingStar\"]'); const allText = document.body.innerText; const enrollMatch = allText.match(/(\\d[\\d,\\.]+[KkMm]?)\\s*(student|learner|already enrolled)/i); const levelMatch = allText.match(/(Beginner|Intermediate|Advanced|Mixed)\\s*level/i); const durationMatch = allText.match(/(Approx\\.?\\s*)?\\d+\\s*(hours?|weeks?|months?)\\s*(to complete|at \\d+)/i); const skillEls = document.querySelectorAll('[class*=\"skill\"] span, [class*=\"Skill\"] li, [class*=\"skill-name\"]'); const skills = []; skillEls.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length < 60 && !skills.includes(t)) skills.push(t); }); const moduleEls = document.querySelectorAll('[class*=\"SyllabusModule\"] h3, [class*=\"syllabus\"] h3, section[aria-label*=\"Syllabus\"] h3, [class*=\"week\"] h3, [class*=\"Module\"] h3'); const syllabus = []; moduleEls.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length < 120) syllabus.push(t); }); const instructorLinks = document.querySelectorAll('a[href*=\"/instructor/\"]'); const instructors = []; instructorLinks.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length > 2 && t.length < 80 && !instructors.includes(t)) instructors.push(t); }); const priceEl = document.querySelector('[class*=\"price\"] span, [data-testid=\"price\"]'); const imgEl = document.querySelector('[class*=\"banner\"] img, [class*=\"hero\"] img, main img'); return { title: titleEl ? titleEl.textContent.trim() : '', provider: providers.join(', '), description: descEl ? descEl.textContent.trim().substring(0, 1000) : '', rating: ratingEl ? (ratingEl.getAttribute('aria-label') || ratingEl.textContent.trim()) : '', enrollment: enrollMatch ? enrollMatch[0] : '', level: levelMatch ? levelMatch[1] : '', duration: durationMatch ? durationMatch[0] : '', price: priceEl ? priceEl.textContent.trim() : '', skills: skills.slice(0, 10), syllabus: syllabus.slice(0, 12), instructors: instructors.slice(0, 5), image: imgEl ? imgEl.getAttribute('src') : '', url: window.location.href }",
      "name": "course_data",
      "label": "Extract course details"
    }
  ]
}
