{
  "id": "coursera-scrape-specialization",
  "name": "coursera_scrape_specialization",
  "description": "Scrape a Coursera specialization or professional certificate page. Returns title, provider, description, courses included, rating, enrollment, and duration.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "spec_url",
      "type": "string",
      "description": "Coursera specialization URL (e.g. 'https://www.coursera.org/specializations/deep-learning')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "{{spec_url}}",
      "label": "Open specialization page"
    },
    {
      "action": "waitForSelector",
      "selector": "h1",
      "timeout": 15000,
      "label": "Wait for page to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1500,
      "label": "Scroll to load courses"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1500,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1500,
      "label": "Scroll to bottom"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const titleEl = document.querySelector('h1'); const providerEls = document.querySelectorAll('a[href*=\"/partners/\"], a[href*=\"/instructor/\"], [class*=\"partnerName\"] a'); const providers = []; providerEls.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length < 80 && !providers.includes(t)) providers.push(t); }); const descEl = document.querySelector('[class*=\"description\"] p, [class*=\"about\"] p, section p'); const ratingEl = document.querySelector('[role=\"meter\"], [aria-label*=\"stars\"], [class*=\"cds-RatingStar\"]'); const allText = document.body.innerText; const enrollMatch = allText.match(/(\\d[\\d,\\.]+[KkMm]?)\\s*(student|learner|already enrolled)/i); const levelMatch = allText.match(/(Beginner|Intermediate|Advanced|Mixed)\\s*level/i); const durationMatch = allText.match(/(Approx\\.?\\s*)?\\d+\\s*(months?|weeks?|hours?)\\s*(to complete|at \\d+)?/i); const imgEl = document.querySelector('[class*=\"banner\"] img, [class*=\"hero\"] img, main img'); const courses = []; const courseLinks = document.querySelectorAll('a[href*=\"/learn/\"]'); const seen = new Set(); courseLinks.forEach(function(el) { const href = el.getAttribute('href') || ''; if (seen.has(href) || courses.length >= 10) return; const h = el.querySelector('h3, h2, strong'); if (!h) return; seen.add(href); const parent = el.closest('li, div[class*=\"course\"], div[class*=\"Course\"]'); const durEl = parent ? parent.querySelector('[class*=\"duration\"], [class*=\"hours\"]') : null; const descInner = parent ? parent.querySelector('p') : null; courses.push({ name: h.textContent.trim(), description: descInner ? descInner.textContent.trim().substring(0, 200) : '', duration: durEl ? durEl.textContent.trim() : '', url: href.startsWith('http') ? href : 'https://www.coursera.org' + href }); }); const skillEls = document.querySelectorAll('[class*=\"skill\"] span, [class*=\"Skill\"] li, [class*=\"skill-name\"]'); const skills = []; skillEls.forEach(function(el) { const t = el.textContent.trim(); if (t && t.length < 60 && !skills.includes(t)) skills.push(t); }); const outcomeEls = document.querySelectorAll('[class*=\"outcome\"] li, [class*=\"what-you-will-learn\"] li, [class*=\"WhatYouWillLearn\"] li'); const outcomes = []; outcomeEls.forEach(function(el) { outcomes.push(el.textContent.trim()); }); return { title: titleEl ? titleEl.textContent.trim() : '', provider: providers.join(', '), description: descEl ? descEl.textContent.trim().substring(0, 1000) : '', rating: ratingEl ? (ratingEl.getAttribute('aria-label') || ratingEl.textContent.trim()) : '', enrollment: enrollMatch ? enrollMatch[0] : '', level: levelMatch ? levelMatch[1] : '', duration: durationMatch ? durationMatch[0] : '', course_count: courses.length, courses: courses, skills: skills.slice(0, 10), outcomes: outcomes.slice(0, 8), image: imgEl ? imgEl.getAttribute('src') : '', url: window.location.href }",
      "name": "specialization_data",
      "label": "Extract specialization details"
    }
  ]
}
