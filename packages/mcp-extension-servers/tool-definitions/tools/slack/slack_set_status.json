{
  "id": "slack-set-status",
  "name": "slack_set_status",
  "description": "Set your Slack status emoji and text. Set both to empty to clear status.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "status_text",
      "type": "string",
      "description": "Status text (e.g. 'In a meeting', 'Working from home')",
      "required": false,
      "default": ""
    },
    {
      "name": "status_emoji",
      "type": "string",
      "description": "Status emoji code (e.g. ':house:', ':calendar:', ':palm_tree:')",
      "required": false,
      "default": ""
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://app.slack.com",
      "label": "Open Slack"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let Slack load"
    },
    {
      "action": "code",
      "code": "const localConfig = localStorage.getItem('localConfig_v2'); if (!localConfig) throw new Error('Not logged into Slack'); const config = JSON.parse(localConfig); const teamId = Object.keys(config.teams)[0]; const token = config.teams[teamId].token; const profile = { status_text: `{{status_text}}`, status_emoji: `{{status_emoji}}` }; const resp = await fetch('/api/users.profile.set', { method: 'POST', headers: { 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' }, body: JSON.stringify({ profile }) }); const data = await resp.json(); if (!data.ok) throw new Error('Status update failed: ' + data.error); return { success: true, status_text: profile.status_text, status_emoji: profile.status_emoji }",
      "name": "result",
      "label": "Set status via Slack API"
    }
  ]
}
