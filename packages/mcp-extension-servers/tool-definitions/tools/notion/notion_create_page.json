{
  "id": "notion-create-page",
  "name": "notion_create_page",
  "description": "Create a new page in Notion. Creates it in the workspace root or inside a specified parent page.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "title",
      "type": "string",
      "description": "Page title",
      "required": true
    },
    {
      "name": "content",
      "type": "string",
      "description": "Page content text",
      "required": false,
      "default": ""
    },
    {
      "name": "parent_page_url",
      "type": "string",
      "description": "Parent page URL to create under (leave empty for workspace root)",
      "required": false,
      "default": ""
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.notion.so",
      "label": "Open Notion"
    },
    {
      "action": "wait",
      "ms": 3000,
      "label": "Let Notion load"
    },
    {
      "action": "code",
      "code": "const parentUrl = `{{parent_page_url}}`; let spaceId = ''; const spaceResp = await fetch('/api/v3/getSpaces', { method: 'POST', headers: { 'Content-Type': 'application/json' }, credentials: 'same-origin', body: '{}' }); if (spaceResp.ok) { const spaces = await spaceResp.json(); const firstUser = Object.keys(spaces)[0]; if (firstUser) { const userSpaces = spaces[firstUser]?.space; spaceId = userSpaces ? Object.keys(userSpaces)[0] : ''; } } const pageId = crypto.randomUUID(); const now = Date.now(); const ops = [{ id: pageId, table: 'block', path: [], command: 'set', args: { type: 'page', id: pageId, version: 1, alive: true, created_time: now, last_edited_time: now, space_id: spaceId, properties: { title: [[ `{{title}}` ]] } } }]; const contentText = `{{content}}`; if (contentText) { const blockId = crypto.randomUUID(); ops.push({ id: blockId, table: 'block', path: [], command: 'set', args: { type: 'text', id: blockId, version: 1, alive: true, parent_id: pageId, parent_table: 'block', created_time: now, last_edited_time: now, space_id: spaceId, properties: { title: [[ contentText ]] } } }); ops.push({ id: pageId, table: 'block', path: ['content'], command: 'listAfter', args: { id: blockId } }); } const resp = await fetch('/api/v3/submitTransaction', { method: 'POST', headers: { 'Content-Type': 'application/json' }, credentials: 'same-origin', body: JSON.stringify({ operations: ops }) }); if (!resp.ok) throw new Error('Create page failed: ' + resp.status); return { success: true, page_id: pageId, title: `{{title}}`, url: 'https://www.notion.so/' + pageId.replace(/-/g, '') }",
      "name": "result",
      "label": "Create page via Notion API"
    }
  ]
}
