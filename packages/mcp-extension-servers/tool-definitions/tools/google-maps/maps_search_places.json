{
  "id": "maps-search-places",
  "name": "maps_search_places",
  "description": "Search for businesses or places on Google Maps. Returns up to 10 results with name, rating, address, and type.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "query",
      "type": "string",
      "description": "Search query (e.g. 'coffee shops in San Francisco', 'dentist near me')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.google.com/maps/search/{{query}}",
      "label": "Search Google Maps"
    },
    {
      "action": "waitForSelector",
      "selector": "[role='feed'], div[role='feed']",
      "timeout": 15000,
      "label": "Wait for results feed"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let results render"
    },
    {
      "action": "scroll",
      "selector": "[role='feed']",
      "direction": "down",
      "amount": 800,
      "label": "Scroll results feed"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const results = []; const feed = document.querySelector('[role=\"feed\"]'); if (!feed) return { result_count: 0, results: [] }; const items = feed.querySelectorAll('div[jsaction] a[href*=\"/maps/place/\"]'); const seen = new Set(); for (let i = 0; i < items.length && results.length < 10; i++) { const link = items[i]; const href = link.href; if (seen.has(href)) continue; seen.add(href); const container = link.closest('div[jsaction]'); if (!container) continue; const nameEl = container.querySelector('.fontHeadlineSmall, .qBF1Pd'); const ratingEl = container.querySelector('span[role=\"img\"]'); const categoryEl = container.querySelector('.fontBodyMedium span[style*=\"color\"]'); const addressEl = container.querySelectorAll('.fontBodyMedium span'); let address = ''; for (const sp of addressEl) { const t = sp.textContent.trim(); if (t.length > 10 && !t.includes('Â·') && !t.includes('star')) { address = t; break; } } results.push({ name: nameEl ? nameEl.textContent.trim() : 'Unknown', rating: ratingEl ? ratingEl.getAttribute('aria-label') : '', category: categoryEl ? categoryEl.textContent.trim() : '', address: address, url: href }); } return { result_count: results.length, results: results }",
      "name": "search_results",
      "label": "Extract search results"
    }
  ]
}
