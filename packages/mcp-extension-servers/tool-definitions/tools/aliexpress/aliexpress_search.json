{
  "id": "aliexpress-search",
  "name": "aliexpress_search",
  "description": "Search for products on AliExpress. Returns up to 15 results with title, price, rating, orders, seller, image, and URL.",
  "version": "1.0.0",
  "parameters": [
    { "name": "query", "type": "string", "description": "Search query (e.g. 'wireless earbuds', 'phone case', 'LED lights')", "required": true }
  ],
  "steps": [
    { "action": "navigate", "url": "https://www.aliexpress.com/w/wholesale-{{query}}.html", "label": "Search AliExpress" },
    { "action": "waitForSelector", "selector": "[class*='search-item'], [class*='product-card'], [class*='SearchResultList']", "timeout": 15000, "label": "Wait for results" },
    { "action": "wait", "ms": 2000, "label": "Let results render" },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll for more" },
    { "action": "wait", "ms": 1500 },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll further" },
    { "action": "wait", "ms": 1500 },
    {
      "action": "code",
      "code": "const results = []; const items = document.querySelectorAll('[class*=\"search-item-card\"], [class*=\"product-card\"], [class*=\"list--gallery\"] > div, a[href*=\"/item/\"]'); for (let i = 0; i < Math.min(items.length, 15); i++) { const el = items[i]; const titleEl = el.querySelector('h1, h3, [class*=\"title\"], [class*=\"name\"] a'); const priceEl = el.querySelector('[class*=\"price\"], [class*=\"Price\"]'); const ratingEl = el.querySelector('[class*=\"rating\"], [class*=\"star\"]'); const ordersEl = el.querySelector('[class*=\"sold\"], [class*=\"orders\"]'); const imgEl = el.querySelector('img'); const linkEl = el.tagName === 'A' ? el : el.querySelector('a[href*=\"/item/\"]'); const storeEl = el.querySelector('[class*=\"store\"], [class*=\"shop\"]'); results.push({ title: titleEl ? titleEl.textContent.trim().substring(0, 200) : '', price: priceEl ? priceEl.textContent.trim() : '', rating: ratingEl ? ratingEl.textContent.trim() : '', orders: ordersEl ? ordersEl.textContent.trim() : '', store: storeEl ? storeEl.textContent.trim() : '', url: linkEl ? linkEl.href : '', image: imgEl ? imgEl.getAttribute('src') : '' }); } return { query: `{{query}}`, result_count: results.length, results: results }",
      "name": "search_results",
      "label": "Extract product results"
    }
  ]
}