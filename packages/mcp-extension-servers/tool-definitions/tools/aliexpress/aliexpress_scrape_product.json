{
  "id": "aliexpress-scrape-product",
  "name": "aliexpress_scrape_product",
  "description": "Scrape full product details from an AliExpress product page. Returns title, price, rating, orders, description, specifications, seller info, and images.",
  "version": "1.0.0",
  "parameters": [
    { "name": "product_url", "type": "string", "description": "AliExpress product URL", "required": true }
  ],
  "steps": [
    { "action": "navigate", "url": "{{product_url}}", "label": "Open product page" },
    { "action": "waitForSelector", "selector": "h1, [class*='product-title'], [class*='Title']", "timeout": 15000, "label": "Wait for page" },
    { "action": "wait", "ms": 2000, "label": "Let page render" },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll for content" },
    { "action": "wait", "ms": 1500 },
    { "action": "scroll", "direction": "down", "amount": 1000, "label": "Scroll further" },
    { "action": "wait", "ms": 1500 },
    {
      "action": "code",
      "code": "const titleEl = document.querySelector('h1, [class*=\"product-title\"], [class*=\"Title\"]'); const priceEl = document.querySelector('[class*=\"product-price\"], [class*=\"Price\"], [class*=\"uniform-banner-box\"]'); const ratingEl = document.querySelector('[class*=\"rating\"], [class*=\"star\"]'); const ordersEl = document.querySelector('[class*=\"sold\"], [class*=\"trade\"]'); const descEl = document.querySelector('[class*=\"product-description\"], [class*=\"detail-desc\"]'); const storeNameEl = document.querySelector('[class*=\"store-name\"], a[href*=\"/store/\"]'); const storeFeedbackEl = document.querySelector('[class*=\"store-feedback\"], [class*=\"store-rating\"]'); const specs = {}; document.querySelectorAll('[class*=\"specification\"] li, [class*=\"product-prop\"] li, [class*=\"property-item\"]').forEach(function(el) { const text = el.textContent.trim(); const parts = text.split(':'); if (parts.length === 2) { specs[parts[0].trim()] = parts[1].trim(); } }); const images = []; document.querySelectorAll('[class*=\"slider\"] img, [class*=\"image-view\"] img, [class*=\"magnifier\"] img').forEach(function(img) { const src = img.getAttribute('src') || ''; if (src && !images.includes(src)) images.push(src); }); const shippingEl = document.querySelector('[class*=\"shipping\"], [class*=\"delivery\"]'); return { title: titleEl ? titleEl.textContent.trim() : '', price: priceEl ? priceEl.textContent.trim() : '', rating: ratingEl ? ratingEl.textContent.trim() : '', orders: ordersEl ? ordersEl.textContent.trim() : '', description: descEl ? descEl.textContent.trim().substring(0, 1500) : '', store_name: storeNameEl ? storeNameEl.textContent.trim() : '', store_feedback: storeFeedbackEl ? storeFeedbackEl.textContent.trim() : '', shipping: shippingEl ? shippingEl.textContent.trim() : '', specifications: specs, images: images.slice(0, 8), url: window.location.href }",
      "name": "product_data",
      "label": "Extract product details"
    }
  ]
}