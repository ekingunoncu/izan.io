{
  "id": "twitch-scrape-clips",
  "name": "twitch_scrape_clips",
  "description": "Scrape top clips from a Twitch channel. Returns clip titles, views, duration, creator, game, and URLs.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "channel_name",
      "type": "string",
      "description": "Twitch channel name (e.g. 'shroud', 'pokimane')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.twitch.tv/{{channel_name}}/clips?filter=clips&range=7d",
      "label": "Open clips page"
    },
    {
      "action": "waitForSelector",
      "selector": "[class*='clip-card'], [class*='ClipCard'], article, [class*='tower'] > div",
      "timeout": 15000,
      "label": "Wait for clips to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let clips render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll to load more"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const clips = []; const clipEls = document.querySelectorAll('[class*=\"clip-card\"], article, [class*=\"tower\"] > div'); for (let i = 0; i < Math.min(clipEls.length, 15); i++) { const el = clipEls[i]; const titleEl = el.querySelector('h3, [class*=\"title\"], [data-a-target=\"preview-card-title-link\"]'); const viewsEl = el.querySelector('[class*=\"views\"], [class*=\"viewer\"]'); const durationEl = el.querySelector('[class*=\"duration\"], [class*=\"timestamp\"]'); const creatorEl = el.querySelector('[class*=\"creator\"], [class*=\"clipper\"]'); const gameEl = el.querySelector('[data-a-target=\"preview-card-game-link\"], [class*=\"game\"]'); const linkEl = el.querySelector('a[href*=\"/clip/\"], a'); const imgEl = el.querySelector('img'); clips.push({ title: titleEl ? titleEl.textContent.trim() : '', views: viewsEl ? viewsEl.textContent.trim() : '', duration: durationEl ? durationEl.textContent.trim() : '', creator: creatorEl ? creatorEl.textContent.trim() : '', game: gameEl ? gameEl.textContent.trim() : '', url: linkEl ? linkEl.href : '', thumbnail: imgEl ? imgEl.getAttribute('src') : '' }); } return { channel_name: '{{channel_name}}', clip_count: clips.length, clips: clips, url: window.location.href }",
      "name": "clips_data",
      "label": "Extract clips"
    }
  ]
}