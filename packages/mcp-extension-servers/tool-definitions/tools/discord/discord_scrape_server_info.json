{
  "id": "discord-scrape-server-info",
  "name": "discord_scrape_server_info",
  "description": "Get information about a Discord server: name, member count, channels, and boost level.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "channel_url",
      "type": "string",
      "description": "Any channel URL in the server (e.g. 'https://discord.com/channels/123/456')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "{{channel_url}}",
      "label": "Open Discord server"
    },
    {
      "action": "waitForSelector",
      "selector": "div[role='textbox'], nav[aria-label='Servers sidebar']",
      "timeout": 15000,
      "label": "Wait for server to load"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "code",
      "code": "const serverNameEl = document.querySelector('h2[aria-label], header h1, [data-list-id=\"channels\"]')?.closest('nav')?.querySelector('h2, h1, header button span, header a span'); let serverName = ''; if (serverNameEl) { serverName = serverNameEl.textContent.trim(); } else { const headerBtn = document.querySelector('button[aria-label*=\"Server\"], header button'); if (headerBtn) serverName = headerBtn.textContent.trim().split('\\n')[0]; } const channels = []; const channelNav = document.querySelector('nav[aria-label*=\"channel\"], nav[aria-label*=\"Channel\"], div[data-list-id=\"channels\"]')?.closest('nav') || document.querySelector('[aria-label*=\"Channels\"]'); const channelEls = channelNav ? channelNav.querySelectorAll('a[data-list-item-id*=\"channels\"], a[href*=\"/channels/\"]') : document.querySelectorAll('a[href*=\"/channels/\"][data-list-item-id]'); const seen = new Set(); channelEls.forEach(el => { const nameEl = el.querySelector('span, div'); const name = nameEl ? nameEl.textContent.trim() : el.textContent.trim(); if (name && !seen.has(name) && name.length < 50) { seen.add(name); channels.push(name); } }); if (!serverName) serverName = document.title.replace(/\\s*[-|].*$/, '') || 'Unknown'; const serverId = window.location.pathname.split('/')[2]; return { server_name: serverName, server_id: serverId, channel_count: channels.length, channels: channels.slice(0, 30), url: window.location.href }",
      "name": "server_info",
      "label": "Extract server info"
    }
  ]
}
