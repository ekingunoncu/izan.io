{
  "id": "coinbase-scrape-gainers-losers",
  "name": "coinbase_scrape_gainers_losers",
  "description": "Scrape top gainers and top losers on Coinbase. Visits the top-gainers page first, then the top-losers page.",
  "version": "1.0.0",
  "parameters": [],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.coinbase.com/explore/s/top-gainers",
      "label": "Open top gainers page"
    },
    {
      "action": "waitForSelector",
      "selector": "table, a[href*='/price/']",
      "timeout": 15000,
      "label": "Wait for content"
    },
    {
      "action": "wait",
      "ms": 2500,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll for more"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "code",
      "code": "const gainers = []; document.querySelectorAll('table tbody tr, a[href*=\"/price/\"]').forEach((el, i) => { if (i >= 15) return; const name = el.querySelector('td:first-child, h2, p')?.textContent?.trim() || el.textContent?.trim() || ''; const price = el.querySelector('td:nth-child(2), [class*=\"Price\"]')?.textContent?.trim() || ''; const change = el.querySelector('td:nth-child(3), [class*=\"Change\"]')?.textContent?.trim() || ''; const link = el.querySelector('a[href*=\"/price/\"]') || (el.matches?.('a[href*=\"/price/\"]') ? el : null); const url = link ? link.href : ''; if (name && name.length < 100) gainers.push({ name, price, change, url }); }); return { gainers, url: window.location.href }",
      "name": "gainers_data",
      "label": "Extract gainers"
    },
    {
      "action": "navigate",
      "url": "https://www.coinbase.com/explore/s/top-losers",
      "label": "Open top losers page"
    },
    {
      "action": "waitForSelector",
      "selector": "table, a[href*='/price/']",
      "timeout": 15000,
      "label": "Wait for content"
    },
    {
      "action": "wait",
      "ms": 2500,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll for more"
    },
    {
      "action": "wait",
      "ms": 2000
    },
    {
      "action": "code",
      "code": "const losers = []; document.querySelectorAll('table tbody tr, a[href*=\"/price/\"]').forEach((el, i) => { if (i >= 15) return; const name = el.querySelector('td:first-child, h2, p')?.textContent?.trim() || el.textContent?.trim() || ''; const price = el.querySelector('td:nth-child(2), [class*=\"Price\"]')?.textContent?.trim() || ''; const change = el.querySelector('td:nth-child(3), [class*=\"Change\"]')?.textContent?.trim() || ''; const link = el.querySelector('a[href*=\"/price/\"]') || (el.matches?.('a[href*=\"/price/\"]') ? el : null); const url = link ? link.href : ''; if (name && name.length < 100) losers.push({ name, price, change, url }); }); return { losers, url: window.location.href }",
      "name": "losers_data",
      "label": "Extract losers"
    }
  ]
}
