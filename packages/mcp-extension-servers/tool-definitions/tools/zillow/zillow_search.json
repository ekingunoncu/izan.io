{
  "id": "zillow-search",
  "name": "zillow_search",
  "description": "Search for properties on Zillow. Returns up to 15 results with address, price, bedrooms, bathrooms, square footage, listing type, and URL.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "query",
      "type": "string",
      "description": "Search query - location or address (e.g. 'San Francisco CA', 'Miami Beach condos', '10001')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.zillow.com/homes/{{query}}_rb/",
      "label": "Search Zillow"
    },
    {
      "action": "waitForSelector",
      "selector": "[data-test='property-card'], article[class*='property'], [class*='ListItem'], [class*='StyledPropertyCard']",
      "timeout": 15000,
      "label": "Wait for search results"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let results render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll to load more results"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1000,
      "label": "Scroll further down"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const results = []; const cards = document.querySelectorAll('[data-test=\"property-card\"], article[class*=\"property\"], [class*=\"ListItem\"] article, [class*=\"StyledPropertyCard\"]'); for (let i = 0; i < Math.min(cards.length, 15); i++) { const el = cards[i]; const addressEl = el.querySelector('[data-test=\"property-card-addr\"], address, [class*=\"address\"]'); const priceEl = el.querySelector('[data-test=\"property-card-price\"], [class*=\"price\"], span[class*=\"Price\"]'); const linkEl = el.querySelector('a[href*=\"/homedetails/\"], a[href*=\"zillow.com\"]'); const imgEl = el.querySelector('img'); const bedsEl = el.querySelector('[class*=\"beds\"] b, [class*=\"beds\"], abbr[class*=\"bed\"]'); const bathsEl = el.querySelector('[class*=\"baths\"] b, [class*=\"baths\"], abbr[class*=\"bath\"]'); const sqftEl = el.querySelector('[class*=\"sqft\"] b, [class*=\"area\"], abbr[class*=\"sqft\"]'); const statusEl = el.querySelector('[class*=\"status\"], [class*=\"listing-tag\"], [class*=\"cardStatus\"]'); const detailText = el.textContent || ''; const bdMatch = detailText.match(/(\\d+)\\s*bd/i); const baMatch = detailText.match(/(\\d+)\\s*ba/i); const sqftMatch = detailText.match(/([\\d,]+)\\s*sqft/i); results.push({ address: addressEl ? addressEl.textContent.trim() : '', price: priceEl ? priceEl.textContent.trim() : '', beds: bedsEl ? bedsEl.textContent.trim() : (bdMatch ? bdMatch[1] : ''), baths: bathsEl ? bathsEl.textContent.trim() : (baMatch ? baMatch[1] : ''), sqft: sqftEl ? sqftEl.textContent.trim() : (sqftMatch ? sqftMatch[1] : ''), status: statusEl ? statusEl.textContent.trim() : '', url: linkEl ? linkEl.href : '', image: imgEl ? imgEl.getAttribute('src') : '' }); } return { query: `{{query}}`, result_count: results.length, results: results }",
      "name": "search_results",
      "label": "Extract property results"
    }
  ]
}