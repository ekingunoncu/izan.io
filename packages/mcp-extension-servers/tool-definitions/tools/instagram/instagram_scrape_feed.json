{
  "id": "instagram-scrape-feed",
  "name": "instagram_scrape_feed",
  "description": "Scrape the Instagram home feed. Returns up to 10 posts with author, caption preview, likes, comments count, image alt text, and timestamp. You must be logged in to Instagram.",
  "version": "1.0.0",
  "parameters": [],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.instagram.com/",
      "label": "Open Instagram home feed"
    },
    {
      "action": "waitForSelector",
      "selector": "article, article[role='presentation'], main[role='main'] article",
      "timeout": 15000,
      "label": "Wait for feed to load"
    },
    {
      "action": "wait",
      "ms": 2500,
      "label": "Let initial posts render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 2000,
      "label": "Scroll to load more posts"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Wait for additional posts to load"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 2000,
      "label": "Scroll further to load more posts"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Wait for posts to render"
    },
    {
      "action": "code",
      "code": "const posts = []; const articles = document.querySelectorAll('article, article[role=\"presentation\"]'); for (let i = 0; i < Math.min(articles.length, 10); i++) { const article = articles[i]; const authorEl = article.querySelector('header a span, header a[role=\"link\"] span, a[class*=\"notranslate\"], header span[dir=\"auto\"] a'); const author = authorEl ? authorEl.textContent.trim() : ''; const authorLink = article.querySelector('header a[href^=\"/\"]'); const authorUrl = authorLink ? 'https://www.instagram.com' + authorLink.getAttribute('href') : ''; const captionContainer = article.querySelector('div[class*=\"caption\"] span, ul li span[dir=\"auto\"], div > span[dir=\"auto\"]'); let caption = ''; if (captionContainer) { caption = captionContainer.textContent.trim().substring(0, 200); } const imgEl = article.querySelector('img[class*=\"x5yr21d\"], img[style*=\"object-fit\"], div[role=\"presentation\"] img, div[role=\"button\"] img'); const imageAlt = imgEl ? (imgEl.alt || '') : ''; const likesEl = article.querySelector('section span[class*=\"like\"] span, a[href*=\"liked_by\"] span, section button span, section a span'); const likes = likesEl ? likesEl.textContent.trim() : ''; const commentsEl = article.querySelector('a[href*=\"/comments/\"] span, a[href*=\"/p/\"][href*=\"/comments\"] span'); const comments = commentsEl ? commentsEl.textContent.trim() : ''; const timeEl = article.querySelector('time[datetime], a time'); const timestamp = timeEl ? (timeEl.getAttribute('datetime') || timeEl.textContent.trim()) : ''; const postLink = article.querySelector('a[href*=\"/p/\"], a[href*=\"/reel/\"]'); const postUrl = postLink ? 'https://www.instagram.com' + postLink.getAttribute('href') : ''; posts.push({ author: author, author_url: authorUrl, caption_preview: caption, likes: likes, comments_count: comments, image_alt: imageAlt, timestamp: timestamp, post_url: postUrl }); } return { post_count: posts.length, posts: posts }",
      "name": "feed_posts",
      "label": "Extract feed posts"
    }
  ]
}