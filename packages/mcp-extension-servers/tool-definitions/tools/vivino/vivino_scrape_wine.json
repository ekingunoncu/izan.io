{
  "id": "vivino-scrape-wine",
  "name": "vivino_scrape_wine",
  "description": "Scrape details for a specific wine on Vivino including name, winery, rating, price, region, grape, and description.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "wine_path",
      "type": "string",
      "description": "Wine URL path (e.g. 'w/9253313' or 'FR/Bordeaux/wines/Chateau-Margaux/')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.vivino.com/{{wine_path}}",
      "label": "Open Vivino"
    },
    {
      "action": "waitForSelector",
      "selector": "h1, [class*=\"vintageTitle\"], .inner-page",
      "timeout": 15000,
      "label": "Wait for page"
    },
    {
      "action": "wait",
      "ms": 2500,
      "label": "Let page render"
    },
    {
      "action": "code",
      "code": "const name = document.querySelector('h1, [class*=\"vintageTitle\"], [class*=\"wineName\"]')?.textContent?.trim() || ''; const winery = document.querySelector('[class*=\"winery\"], a[href*=\"/wineries/\"]')?.textContent?.trim() || ''; const rating = document.querySelector('[class*=\"averageValue\"], [class*=\"averageRating\"], [class*=\"rating\"]')?.textContent?.trim() || ''; const ratingCount = document.querySelector('[class*=\"basedOn\"], [class*=\"ratingCount\"]')?.textContent?.trim() || ''; const price = document.querySelector('[class*=\"price\"], [class*=\"amount\"]')?.textContent?.trim() || ''; const region = document.querySelector('[class*=\"region\"], [class*=\"country\"], [class*=\"Location\"]')?.textContent?.trim() || ''; const grape = document.querySelector('[class*=\"grape\"], [class*=\"varietal\"]')?.textContent?.trim() || ''; const desc = document.querySelector('[class*=\"description\"], [class*=\"taste\"]')?.textContent?.trim()?.slice(0, 500) || ''; return { name, winery, rating, ratingCount, price, region, grape, description: desc, url: window.location.href };",
      "name": "result",
      "label": "Extract data"
    }
  ]
}
