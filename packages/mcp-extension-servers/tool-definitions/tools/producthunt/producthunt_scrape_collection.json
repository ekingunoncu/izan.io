{
  "id": "producthunt-scrape-collection",
  "name": "producthunt_scrape_collection",
  "description": "Scrape a Product Hunt collection/topic page. Returns collection name, description, follower count, and featured products.",
  "version": "1.0.0",
  "parameters": [
    {
      "name": "topic_slug",
      "type": "string",
      "description": "Topic or collection slug (e.g. 'artificial-intelligence', 'developer-tools', 'productivity')",
      "required": true
    }
  ],
  "steps": [
    {
      "action": "navigate",
      "url": "https://www.producthunt.com/topics/{{topic_slug}}",
      "label": "Open topic page"
    },
    {
      "action": "waitForSelector",
      "selector": "h1, [class*='topic'], [class*='collection'], [class*='hero']",
      "timeout": 15000,
      "label": "Wait for topic page to load"
    },
    {
      "action": "wait",
      "ms": 2000,
      "label": "Let page render"
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll to load products"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "scroll",
      "direction": "down",
      "amount": 1200,
      "label": "Scroll further"
    },
    {
      "action": "wait",
      "ms": 1500
    },
    {
      "action": "code",
      "code": "const nameEl = document.querySelector('h1, [class*=\"topic\"] h1, [class*=\"collection\"] h1'); const descEl = document.querySelector('[class*=\"description\"], [class*=\"about\"] p, h1 + p'); const followersEl = document.querySelector('[class*=\"follower\"] span, [class*=\"subscriber\"]'); const products = []; const productEls = document.querySelectorAll('[data-test=\"post-item\"], [class*=\"post-item\"], a[href*=\"/posts/\"]'); const seen = new Set(); for (let i = 0; i < productEls.length && products.length < 15; i++) { const el = productEls[i]; const nameEl2 = el.querySelector('h3, strong, [class*=\"title\"]'); const href = el.getAttribute('href') || (el.querySelector('a[href*=\"/posts/\"]') ? el.querySelector('a[href*=\"/posts/\"]').href : ''); if (seen.has(href) || !href) continue; seen.add(href); const taglineEl = el.querySelector('p, [class*=\"tagline\"]'); const upvotesEl = el.querySelector('[class*=\"vote\"] span'); const imgEl = el.querySelector('img'); products.push({ name: nameEl2 ? nameEl2.textContent.trim() : '', tagline: taglineEl ? taglineEl.textContent.trim() : '', upvotes: upvotesEl ? upvotesEl.textContent.trim() : '', image: imgEl ? imgEl.getAttribute('src') : '', url: href.startsWith('http') ? href : 'https://www.producthunt.com' + href }); } return { topic: `{{topic_slug}}`, name: nameEl ? nameEl.textContent.trim() : '{{topic_slug}}', description: descEl ? descEl.textContent.trim().substring(0, 500) : '', followers: followersEl ? followersEl.textContent.trim() : '', product_count: products.length, products: products, url: window.location.href }",
      "name": "collection_data",
      "label": "Extract collection details"
    }
  ]
}